(this["webpackJsonpreact-todo"]=this["webpackJsonpreact-todo"]||[]).push([[0],[,,,,function(e,t,n){"use strict";n.r(t),n.d(t,"add",(function(){return a})),n.d(t,"deleteTask",(function(){return r})),n.d(t,"fetchLogin",(function(){return s})),n.d(t,"fetchStatus",(function(){return u})),n.d(t,"logout",(function(){return i})),n.d(t,"fetchTasks",(function(){return l})),n.d(t,"update",(function(){return f}));var a=function(e){var t=e.username,n=e.task;return n={content:n,status:!1},fetch("/tasks/"+t,{method:"POST",headers:new Headers({"content-type":"application/json"}),body:JSON.stringify({task:n})}).catch(c).then((function(e){return e.ok?e.json():e.json().then(o)}))},c=function(e){return{code:"NETWORK-ERROR",e:e}},o=function(e){return Promise.reject(e)},r=function(e){var t=e.username,n=e.taskId;return fetch("/tasks/"+t+"/"+n,{method:"DELETE"}).catch(c).then((function(e){return e.ok?e.json():e.json().then(o)}))},s=function(e){return fetch("/session",{method:"POST",headers:new Headers({"content-type":"application/json"}),body:JSON.stringify({username:e})}).catch(c).then((function(e){return e.ok?e.json():e.json().then(o)}))},u=function(){return fetch("/session",{method:"GET"}).catch(c).then((function(e){return e.ok?e.json():e.json().then(o)}))},i=function(){return fetch("/session",{method:"DELETE"}).catch(c).then((function(e){return e.ok}))},l=function(e){return fetch("/tasks/"+e,{method:"GET"}).catch(c).then((function(e){return e.ok?e.json():e.json().then(o)}))},f=function(e){var t=e.username,n=e.taskId,a=e.task;return fetch("/tasks/"+t+"/"+n,{method:"PUT",headers:new Headers({"content-type":"application/json"}),body:JSON.stringify({task:a})}).catch(c).then((function(e){return e.ok?e.json():e.json().then(o)}))}},,,function(e,t,n){e.exports=n(20)},,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t),n.d(t,"finished",(function(){return o})),n.d(t,"todo",(function(){return r})),n.d(t,"increase",(function(){return s})),n.d(t,"decrease",(function(){return u}));var a=function(e,t,n){return e[t].status===e[n].status?e[t].content<e[n].content?-1:1:e[t].status?-1:e[n].status?1:-1},c=function(e,t,n){return e[t].content<e[n].content?-1:1};function o(e){var t={};return Object.keys(e).sort((function(t,n){return a(e,t,n)})).forEach((function(n){return t[n]=e[n]})),t}function r(e){var t={};return Object.keys(e).sort((function(t,n){return a(e,n,t)})).forEach((function(n){return t[n]=e[n]})),t}function s(e){var t={};return Object.keys(e).sort((function(t,n){return c(e,t,n)})).forEach((function(n){return t[n]=e[n]})),t}function u(e){var t={};return Object.keys(e).sort((function(t,n){return c(e,n,t)})).forEach((function(n){return t[n]=e[n]})),t}},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),o=n(6),r=n.n(o),s=n(1);n(12);function u(e){var t=e.theme,n=e.setThemeState;return c.a.createElement("header",null,c.a.createElement("button",{onClick:n,value:"light",className:"light"===t?"selected":""}," Light "),c.a.createElement("button",{onClick:n,value:"colorful",className:"colorful"===t?"selected":""}," Colorful "),c.a.createElement("button",{onClick:n,value:"dark",className:"dark"===t?"selected":""}," Dark "))}n(13);var i=n(4);function l(e){var t=e.onLogin,n=e.setErr,o=Object(a.useState)(""),r=Object(s.a)(o,2),u=r[0],l=r[1];return c.a.createElement("div",{className:"login"},c.a.createElement("input",{placeholder:"user name",onChange:function(e){l(e.target.value)},value:u}),c.a.createElement("button",{onClick:function(e){e.preventDefault(),i.fetchLogin(u).then((function(e){t(u)})).catch((function(e){n(e.message)}))}}," Sign In "))}var f=n(2),d=n(3);n(14);function h(e){var t=e.id,n=e.task,o=e.editingTaskId,r=e.setEditingTaskId,u=e.onUpdate,i=e.editingTaskContent,l=e.setEditingTaskContent,f=e.onDelete,d=Object(a.useState)(n.content),h=Object(s.a)(d,2),m=h[0],k=h[1];var E=o===t?c.a.createElement("input",{value:m,onChange:function(e){k(e.target.value),l(e.target.value)},onKeyPress:function(e){if("enter"===e.key.toLowerCase()){var t={content:m,status:n.status};u(o,{task:t})}}}):c.a.createElement("span",{onClick:function(e){if(e.stopPropagation(),o&&o!==t){var a={content:i,status:n.status};u(o,a)}r(t),l(m)}},n.content);return c.a.createElement("li",{className:n.status?"done":""},E,c.a.createElement("button",{onClick:function(){var e={content:m,status:!n.status};u(t,e)},className:n.status?"done":"redo"},n.status?"Done":"ToDo"),c.a.createElement("button",{onClick:function(){f(t)},className:"delete"}," Delete "))}n(15);function m(e){var t=e.handleSort;return c.a.createElement("div",null,c.a.createElement("h1",null,"Filter:"),c.a.createElement("select",{name:"sort",onChange:t},c.a.createElement("option",{value:"increase"}," Ascending "),c.a.createElement("option",{value:"decrease"}," Descending "),c.a.createElement("option",{value:"finished"}," Done first "),c.a.createElement("option",{value:"todo"}," Not Done first ")))}n(16);var k=n(4),E=n(17);function g(e){var t=e.onLogout,n=e.username,o=e.theme,r=e.setErr,u=Object(a.useState)({}),i=Object(s.a)(u,2),l=i[0],g=i[1],v=Object(a.useState)(null),b=Object(s.a)(v,2),j=b[0],O=b[1],p=Object(a.useState)(""),T=Object(s.a)(p,2),C=T[0],S=T[1],y=Object(a.useState)("increase"),I=Object(s.a)(y,2),L=I[0],N=I[1],w=Object(a.useState)(""),D=Object(s.a)(w,2),P=D[0],J=D[1];Object(a.useEffect)((function(){k.fetchTasks(n).then((function(e){e.data&&(g(e.data),U(L))})).catch((function(e){r(e.message)}))}),[]);var R=function(){P?k.add({username:n,task:P}).catch((function(e){r(e.message)})).then((function(e){e.data&&e.data.taskId&&(g(Object(d.a)({},l,Object(f.a)({},e.data.taskId,e.data))),J(""),r(""))})).catch((function(e){return r(e.message)})):r("Task content needed")};function H(e){k.deleteTask({username:n,taskId:e}).then((function(e){var t=e.data.taskId;delete l[t],g(Object(d.a)({},l))})).catch((function(e){return r(e.message)}))}function K(e,t){var a=e;k.update({username:n,taskId:a,task:t}).catch((function(e){r(e.message)})).then((function(e){g(Object(d.a)({},l,Object(f.a)({},e.data.taskId,e.data))),r("")}))}function U(e){switch(e){case"increase":g(E.increase(l));break;case"decrease":g(E.decrease(l));break;case"finished":g(E.finished(l));break;default:g(E.todo(l))}}var W=0===Object.keys(l).length?"":c.a.createElement("ul",null,Object.keys(l).map((function(e){return c.a.createElement(h,{key:e,id:e,task:l[e],editingTaskId:j,setEditingTaskId:O,onUpdate:K,editingTaskContent:C,setEditingTaskContent:S,onDelete:H})})));return c.a.createElement("div",{onClick:function(e){if(e.stopPropagation(),"input"!==e.target.nodeName.toLowerCase()&&j){var t=Object(d.a)({},l[j],{content:C});K(j,t),O(null),r("")}},className:"main"},c.a.createElement(m,{handleSort:function(e){N(e.target.value),U(e.target.value)},theme:o}),W,c.a.createElement("div",{className:"user-input"},c.a.createElement("input",{className:o,onChange:function(e){return J(e.target.value)},value:P,onKeyPress:function(e){"enter"===e.key.toLowerCase()&&R()}}),c.a.createElement("button",{onClick:R}," Add Task ")),c.a.createElement("div",{className:"user-info"},c.a.createElement("button",{onClick:function(){k.fetchTasks(n).then((function(e){e.data&&(g(e.data),U(L))}))}}," Refresh List"),c.a.createElement("button",{onClick:function(){k.logout().then((function(){t(),r("")}))}}," Log Out ")))}n(18);var v=n(4);function b(){var e=Object(a.useState)({isLoggedIn:!1}),t=Object(s.a)(e,2),n=t[0],o=t[1],r=Object(a.useState)("colorful"),i=Object(s.a)(r,2),f=i[0],d=i[1],h=Object(a.useState)(""),m=Object(s.a)(h,2),k=m[0],E=m[1];Object(a.useEffect)((function(){v.fetchStatus().then((function(e){o({isLoggedIn:!0,username:e.username})}))}),[]);var b=n.username?c.a.createElement(g,{onLogout:function(){o({isLoggedIn:!1})},username:n.username,theme:f,err:k,setErr:E}):c.a.createElement(l,{onLogin:function(e){o({isLoggedIn:!0,username:e})},theme:f,err:k,setErr:E});return c.a.createElement("div",null,c.a.createElement(u,{theme:f,setThemeState:function(e){d(e.target.value)}}),c.a.createElement("div",{className:"container "+f},c.a.createElement("h1",null," ",k," "),b))}Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n(19);r.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(b,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}],[[7,1,2]]]);
//# sourceMappingURL=main.7978e83f.chunk.js.map